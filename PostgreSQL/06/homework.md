# 06. Физический уровень PostgreSQL 

## создайте виртуальную машину c Ubuntu 20.04 LTS в GCE типа e2-medium в default VPC в любом регионе и зоне, например us-central1-a
## поставьте на нее PostgreSQL через sudo apt


## проверьте что кластер запущен через sudo -u postgres pg_lsclusters
## зайдите из под пользователя postgres в psql и сделайте произвольную таблицу с произвольным содержимым

## остановите postgres например через sudo -u postgres pg_ctlcluster 13 main stop

## создайте новый standard persistent диск GKE через Compute Engine -> Disks в том же регионе и зоне что GCE инстанс размером например 10GB

## добавьте свеже-созданный диск к виртуальной машине - надо зайти в режим ее редактирования и дальше выбрать пункт attach existing disk

## сделайте пользователя postgres владельцем /mnt/data - chown -R postgres:postgres /mnt/data/

## перенесите содержимое /var/lib/postgres/13 в /mnt/data - mv /var/lib/postgresql/13 /mnt/data
## попытайтесь запустить кластер - sudo -u postgres pg_ctlcluster 13 main start
## напишите получилось или нет и почему
## задание: найти конфигурационный параметр в файлах раположенных в /etc/postgresql/13/main который надо поменять и поменяйте его
## напишите что и почему поменяли
## попытайтесь запустить кластер - sudo -u postgres pg_ctlcluster 13 main start
## напишите получилось или нет и почему
## зайдите через через psql и проверьте содержимое ранее созданной таблицы

## задание со звездочкой *: не удаляя существующий GCE инстанс сделайте новый, поставьте на его PostgreSQL, удалите файлы с данными из /var/lib/postgres, перемонтируйте внешний диск который сделали ранее от первой виртуальной машины ко второй и запустите PostgreSQL на второй машине так чтобы он работал с данными на внешнем диске, расскажите как вы это сделали и что в итоге получилось. ДЗ оформите в markdown на github с описанием что делали и с какими проблемами столкнулись.
